<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: HealthBar.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: HealthBar.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* Class responsible for visually indicating the health of a PlayerCharacter.
*
* @constructor
*/
function HealthBar()
{
	/** @property {float} width - The width of the HealthBar's Object3D.*/
	this.width;
	/** @property {float} height - The height of the HealthBar's Object3D.*/
	this.height;

	/** @property {Object3D} node - The rendered polygon ( Object3D ) that represents the HealthBar instance.*/
	this.node;

	/** @property {float} health - The current amount of health of the PlayerCharacter that corresponds to this HealthBar.*/
	this.health;
	/** @property {float} maxHealth - The maximum amount of health of the PlayerCharacter that corresponds to this HealthBar.*/
	this.maxHealth;
}

/**
* Creates a new instance of HealthBar. All instance variables default to null.
* @return {HealthBar} The HealthBar instance that is created.
*/
HealthBar.prototype.initEmpty = function()
{
	this.width = null;
	this.height = null;
	
	this.node = null;

	this.health = null;
	this.maxHealth = null;

	return this;
};

/**
* Creates a new instance of HealthBar with specific dimensions, and a PlayerCharacter's maximum health.
* @return {HealthBar} The HealthBar instance that is created.
*/
HealthBar.prototype.initWithSettings = function(x, y, width, height, maxHealth)
{
	this.initEmpty();

	this.width = width;
	this.height = height;

	this.maxHealth = maxHealth;
	this.health = maxHealth;

	var fullHealthColor = 0x00ff00;

	var outlineColor = 0x000000;
	var margin = 25;

	// Outline

	var geometry = new THREE.PlaneGeometry( this.width + margin, this.height + margin, 32 );
	var material = new THREE.MeshBasicMaterial( {color: outlineColor, side: THREE.DoubleSide} );

	this.node = new THREE.Mesh( geometry, material );

	this.node.position.x = x;
	this.node.position.y = y;

	// Inner Bar

	geometry = new THREE.PlaneGeometry( this.width, this.height, 32 );
	material = new THREE.MeshBasicMaterial( {color: fullHealthColor, side: THREE.DoubleSide} );

	this.node.children[0] =( new THREE.Mesh( geometry, material ) );

	this.node.children[0].position.x = x;
	this.node.children[0].position.y = y;

	return this;
};

// Getters

/**
* Returns the Object3D belonging to this instance.
* @return {Object3D} The Object3D of the instance.
*/
HealthBar.prototype.getNode = function()
{
	return this.node;
};

// Setters

/**
* Sets the current health of a PlayerCharacter based on a given damage value.
* @param {float} damage - The float value that will be subtracted from the health.
*/
HealthBar.prototype.takeDamage = function(damage)
{
	this.health -= damage;

	var healthPercent = this.health / this.maxHealth;

	this.node.children[0].material.color.r = (1 - healthPercent) * 2;
	this.node.children[0].material.color.g = healthPercent * 2;

	if(this.health &lt;= 0)
	{
		this.health = 0;
		this.node.children[0].scale.x = .0001;
	}

	if(this.health != 0)
	{
		this.node.children[0].scale.x = healthPercent;
	}

	this.node.children[0].position.x -= damage * this.width / (2 * this.maxHealth);
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Arena.html">Arena</a></li><li><a href="Collider.html">Collider</a></li><li><a href="Engine.html">Engine</a></li><li><a href="HealthBar.html">HealthBar</a></li><li><a href="HitBox.html">HitBox</a></li><li><a href="PlayerCharacter.html">PlayerCharacter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Mon Nov 16 2015 15:43:55 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
